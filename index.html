<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞: –ü–æ–¥–±–µ—Ä–∏ –ñ–∏–≤–æ—Ç–Ω–æ–µ (–£—Å—Ç–æ–π—á–∏–≤–∞—è –≤–µ—Ä—Å–∏—è)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; 
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            user-select: none; 
        }

        .game-container {
            width: 100%;
            max-width: 600px;
            background-color: #ffffff;
            padding: 24px 20px 32px 20px;
            border-radius: 25px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –∑–æ–Ω—ã —Å–∏–ª—É—ç—Ç–∞ */
        .drop-zone {
            width: 100%;
            height: 200px;
            background-color: #e2e8f0; 
            border-radius: 20px;
            border: 4px dashed #94a3b8;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 24px;
            transition: background-color 0.3s;
            position: relative;
            overflow: hidden; 
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ (—ç–º–æ–¥–∑–∏) */
        .choice-card {
            cursor: grab;
            touch-action: none; 
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            user-select: none;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px 5px; 
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            height: 120px; 
            width: 100px; 
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .dragging {
            position: absolute;
            z-index: 100;
            transform: scale(1.2); 
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            opacity: 0.9;
            background-color: #fffbeb; 
        }
        
        /* Loading Spinner */
        .loader {
            border: 5px solid #f3f3f3; 
            border-top: 5px solid #3498db; 
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #fcd34d, #ef4444);
            border-radius: 50%;
            opacity: 0;
            animation: confetti-fall 1.5s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(400px) rotate(720deg); opacity: 0; }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π */
        .message-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: opacity 0.3s;
            z-index: 10;
        }
        .success { background-color: #34d399; color: white; }
        .hint { background-color: #fcd34d; color: #78350f; }
        .error { background-color: #ef4444; color: white; }
        
        /* –°—Ç–∏–ª—å –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è */
        .correct-match-card {
            z-index: 9; 
        }
    </style>
</head>
<body>

<div class="game-container">
    <h1 class="text-3xl font-extrabold text-gray-800 mb-4">–£–ì–ê–î–ê–ô –ñ–ò–í–û–¢–ù–û–ï!</h1>
    <p class="text-lg text-gray-600 mb-6">–ü–µ—Ä–µ—Ç–∞—â–∏ —ç–º–æ–¥–∑–∏ –∫ —Å–∏–ª—É—ç—Ç—É.</p>

    
    <div id="drop-zone" class="drop-zone relative">
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loading-indicator" class="absolute inset-0 flex flex-col justify-center items-center bg-white bg-opacity-80 rounded-2xl z-20 hidden">
            <div class="loader"></div>
            <p class="text-gray-600 font-semibold mt-2">–ì–æ—Ç–æ–≤–∏–º –≥–æ–ª–æ—Å...</p>
        </div>
        <div id="silhouette-icon" class="text-9xl text-gray-800 opacity-20"></div>
        <div id="status-message" class="message-box hidden"></div>
        
    </div>

    
    <div id="choices-container" class="flex justify-around items-start gap-3 mt-6">
        
    </div>

    
    <button id="next-button" class="mt-8 px-6 py-3 bg-indigo-500 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-600 transition hidden" onclick="nextQuestion()">
        –°–õ–ï–î–£–Æ–©–ò–ô –†–ê–£–ù–î!
    </button>
</div>

<script>
    // ------------------------------------
    // 1. –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò–ì–†–´ –ò TTS
    // ------------------------------------
    const apiKey = ""; // API Key for TTS

    // –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –°–ü–ò–°–û–ö –ñ–ò–í–û–¢–ù–´–• (10)
    const animals = [
        { id: 'dog', name: '–°–æ–±–∞–∫–∞', emoji: 'üê∂' },
        { id: 'cat', name: '–ö–æ—à–∫–∞', emoji: 'üê±' },
        { id: 'pig', name: '–°–≤–∏–Ω—å—è', emoji: 'üê∑' },
        { id: 'cow', name: '–ö–æ—Ä–æ–≤–∞', emoji: 'üêÆ' },
        { id: 'lion', name: '–õ–µ–≤', emoji: 'ü¶Å' },
        { id: 'duck', name: '–£—Ç–∫–∞', emoji: 'ü¶Ü' },
        { id: 'bear', name: '–ú–µ–¥–≤–µ–¥—å', emoji: 'üêª' },
        { id: 'fox', name: '–õ–∏—Å–∞', emoji: 'ü¶ä' },
        { id: 'rabbit', name: '–ö—Ä–æ–ª–∏–∫', emoji: 'üê∞' },
        { id: 'monkey', name: '–û–±–µ–∑—å—è–Ω–∞', emoji: 'üêí' },
    ];

    let currentQuestion = {};
    let isCorrectlyAnswered = false;

    // –°—Å—ã–ª–∫–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã DOM
    const dropZoneEl = document.getElementById('drop-zone');
    const silhouetteIconEl = document.getElementById('silhouette-icon');
    const choicesContainerEl = document.getElementById('choices-container');
    const statusMessageEl = document.getElementById('status-message');
    const nextButtonEl = document.getElementById('next-button');
    const loadingIndicatorEl = document.getElementById('loading-indicator');

    // ------------------------------------
    // 2. TTS –£–¢–ò–õ–ò–¢–´ –ò –§–£–ù–ö–¶–ò–Ø (–ì–æ–ª–æ—Å–æ–≤–æ–π —Å–∏–Ω—Ç–µ–∑)
    // ------------------------------------

    function base64ToArrayBuffer(base64) {
        const binaryString = atob(base64);
        const len = binaryString.length;
        const bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binaryString.charCodeAt(i);
        }
        return bytes.buffer;
    }

    function pcmToWav(pcm16, sampleRate) {
        const buffer = new ArrayBuffer(44 + pcm16.length * 2);
        const view = new DataView(buffer);
        let pos = 0;

        function setUint16(i) { view.setUint16(pos, i, true); pos += 2; }
        function setUint32(i) { view.setUint32(pos, i, true); pos += 4; }
        function setString(s) { for (let i = 0; i < s.length; i++) { view.setUint8(pos + i, s.charCodeAt(i)); } pos += s.length; }

        setString('RIFF');
        setUint32(36 + pcm16.length * 2); 
        setString('WAVE');
        setString('fmt ');
        setUint32(16); 
        setUint16(1); 
        setUint16(1); 
        setUint32(sampleRate);
        setUint32(sampleRate * 2); 
        setUint16(2); 
        setUint16(16); 
        setString('data');
        setUint32(pcm16.length * 2);

        for (let i = 0; i < pcm16.length; i++) {
            view.setInt16(pos, pcm16[i], true);
            pos += 2;
        }

        return new Blob([buffer], { type: 'audio/wav' });
    }
    
    async function playAnimalNameTTS(name) {
        
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;
        const textToSpeak = name + '!'; 
        
        const payload = {
            contents: [{
                parts: [{ text: textToSpeak }]
            }],
            generationConfig: {
                responseModalities: ["AUDIO"],
                speechConfig: {
                    voiceConfig: {
                        // –ò—Å–ø–æ–ª—å–∑—É–µ–º "Iapetus" –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Ä—É—Å—Å–∫–æ–≥–æ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è.
                        prebuiltVoiceConfig: { voiceName: "Iapetus" } 
                    }
                }
            },
            model: "gemini-2.5-flash-preview-tts"
        };

        try {
            let response;
            for (let i = 0; i < 3; i++) { 
                response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (response.ok) break;
                // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
                console.warn(`TTS API retry ${i + 1}/3...`);
                await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
            }
            // --- –£–õ–£–ß–®–ï–ù–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–ö–ò API ---
            if (!response || !response.ok) {
                // –ï—Å–ª–∏ API –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–æ –ø–æ—Å–ª–µ —Ä–µ—Ç—Ä–∞–µ–≤, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                showStatus(`‚ùå –û—à–∏–±–∫–∞: –ó–≤—É–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.`, 'error', 3000);
                throw new Error('TTS API failed after retries.');
            }
            // --- –ö–û–ù–ï–¶ –û–ë–†–ê–ë–û–¢–ö–ò –û–®–ò–ë–ö–ò API ---

            const result = await response.json();
            const part = result?.candidates?.[0]?.content?.parts?.[0];
            const audioData = part?.inlineData?.data;
            const mimeType = part?.inlineData?.mimeType;

            if (audioData && mimeType && mimeType.startsWith("audio/L16")) {
                const sampleRateMatch = mimeType.match(/rate=(\d+)/);
                const sampleRate = sampleRateMatch ? parseInt(sampleRateMatch[1], 10) : 24000;
                
                const pcmData = base64ToArrayBuffer(audioData);
                const pcm16 = new Int16Array(pcmData);
                
                const wavBlob = pcmToWav(pcm16, sampleRate);
                const audioUrl = URL.createObjectURL(wavBlob);

                const audio = new Audio(audioUrl);
                audio.play().catch(e => console.error("Error playing audio:", e));
            } else {
                console.error("TTS Response missing audio data or invalid format.");
                showStatus(`‚ùå –û—à–∏–±–∫–∞: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞—É–¥–∏–æ-–æ—Ç–≤–µ—Ç.`, 'error', 3000);
            }
        } catch (error) {
            console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ TTS API:", error);
             // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—à–∏–±–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∞, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –±—ã–ª–∞ –ø–æ–∫–∞–∑–∞–Ω–∞ –≤—ã—à–µ
             if (!statusMessageEl.textContent.includes('–û—à–∏–±–∫–∞')) {
                 showStatus(`‚ùå –û—à–∏–±–∫–∞: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∑–≤—É–∫.`, 'error', 3000);
             }
        } finally {
            loadingIndicatorEl.classList.add('hidden'); // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º —Å–∫—Ä—ã—Ç–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
        }
    }


    // ------------------------------------
    // 3. –õ–û–ì–ò–ö–ê –ò–ì–†–´ –ò D&D
    // ------------------------------------

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function createNewQuestion() {
        const correctAnswer = animals[Math.floor(Math.random() * animals.length)];
        // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –≤—ã–±–æ—Ä–∞ (–≤—Å–µ–≥–æ 4 –∫–∞—Ä—Ç–æ—á–∫–∏)
        const incorrectAnswers = shuffleArray(animals.filter(a => a.id !== correctAnswer.id)).slice(0, 3);
        const choices = shuffleArray([correctAnswer, ...incorrectAnswers]);

        currentQuestion = {
            correct: correctAnswer,
            choices: choices
        };
    }

    function initializeQuestionUI() {
        isCorrectlyAnswered = false;
        dropZoneEl.classList.remove('bg-green-100');
        statusMessageEl.classList.add('hidden');
        nextButtonEl.classList.add('hidden');
        loadingIndicatorEl.classList.add('hidden'); 
        
        // --- –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–ê–Ø –û–ß–ò–°–¢–ö–ê ---
        choicesContainerEl.innerHTML = ''; // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—ã–±–æ—Ä–∞
        Array.from(dropZoneEl.children).forEach(child => {
            if (child.classList.contains('correct-match-card')) {
                child.remove(); // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ –∑–æ–Ω—ã —Å–±—Ä–æ—Å–∞
            }
        });
        // --- –ö–û–ù–ï–¶ –û–ß–ò–°–¢–ö–ò ---

        createNewQuestion();

        // 1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏–ª—É—ç—Ç (—Å–Ω–æ–≤–∞ –≤–∏–¥–µ–Ω)
        silhouetteIconEl.textContent = currentQuestion.correct.emoji;
        silhouetteIconEl.style.opacity = '0.2';
        
        // 2. –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—ã–±–æ—Ä–∞
        currentQuestion.choices.forEach(animal => {
            const card = document.createElement('div');
            card.className = 'choice-card';
            card.id = `card-${animal.id}`;
            card.setAttribute('data-id', animal.id);
            card.innerHTML = `<span class="text-6xl pointer-events-none">${animal.emoji}</span>
                              <span class="mt-1 text-xs font-semibold text-gray-600 pointer-events-none">${animal.name}</span>`;
            card.style.flex = '1 1 100px'; 
            choicesContainerEl.appendChild(card);
            
            addDragListeners(card);
        });
    }

    // --- D&D –§–£–ù–ö–¶–ò–ò ---
    let activeItem = null;
    let currentX;
    let currentY;
    let xOffset = 0;
    let yOffset = 0;

    function addDragListeners(item) {
        item.addEventListener("touchstart", dragStart, false);
        item.addEventListener("touchend", dragEnd, false);
        item.addEventListener("touchmove", drag, false);
        item.addEventListener("mousedown", dragStart, false);
        item.addEventListener("mouseup", dragEnd, false);
        item.addEventListener("mousemove", drag, false);
    }

    function getCoordinates(e) {
        if (e.type.includes("touch")) {
            return { clientX: e.touches[0].clientX, clientY: e.touches[0].clientY };
        }
        return { clientX: e.clientX, clientY: e.clientY };
    }
    
    function dragStart(e) {
        if (isCorrectlyAnswered) return;
        const coords = getCoordinates(e);
        activeItem = e.target.closest('.choice-card');
        if (activeItem) {
            e.preventDefault(); 
            const rect = activeItem.getBoundingClientRect();
            xOffset = coords.clientX - rect.left;
            yOffset = coords.clientY - rect.top;
            activeItem.classList.add('dragging');
            activeItem.style.position = 'absolute';
            document.body.appendChild(activeItem);
            currentX = coords.clientX - xOffset;
            currentY = coords.clientY - yOffset;
        }
    }

    function dragEnd(e) {
        if (!activeItem || isCorrectlyAnswered) return;
        const dropZoneRect = dropZoneEl.getBoundingClientRect();
        const droppedId = activeItem.getAttribute('data-id');

        const isDroppedOver = 
            currentX + (activeItem.offsetWidth / 2) > dropZoneRect.left &&
            currentX + (activeItem.offsetWidth / 2) < dropZoneRect.right &&
            currentY + (activeItem.offsetHeight / 2) > dropZoneRect.top &&
            currentY + (activeItem.offsetHeight / 2) < dropZoneRect.bottom;

        if (isDroppedOver) {
            checkMatch(droppedId, activeItem);
        } else {
            resetCardPosition(activeItem);
        }
        activeItem = null;
        xOffset = 0;
        yOffset = 0;
    }

    function drag(e) {
        if (!activeItem || isCorrectlyAnswered) return;
        e.preventDefault(); 
        const coords = getCoordinates(e);
        currentX = coords.clientX - xOffset;
        currentY = coords.clientY - yOffset;
        activeItem.style.left = `${currentX}px`;
        activeItem.style.top = `${currentY}px`;
    }
    
    function resetCardPosition(card) {
        choicesContainerEl.appendChild(card); 
        card.classList.remove('dragging');
        card.style.position = 'relative'; 
        card.style.left = 'auto';
        card.style.top = 'auto';
        card.style.transform = 'none'; 
        showStatus('–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ!', 'hint', 1000);
    }
    
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    function checkMatch(droppedId, cardElement) {
        if (droppedId === currentQuestion.correct.id) {
            isCorrectlyAnswered = true;
            
            // 1. –ú–ì–ù–û–í–ï–ù–ù–û –ë–õ–û–ö–ò–†–£–ï–ú UI –ò –ü–û–ö–ê–ó–´–í–ê–ï–ú –£–°–ü–ï–•
            startConfetti();
            dropZoneEl.classList.add('bg-green-100');
            showStatus(`‚úÖ –í–µ—Ä–Ω–æ!`, 'success', 2500);

            // –§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
            cardElement.style.position = 'absolute';
            cardElement.style.top = '50%';
            cardElement.style.left = '50%';
            cardElement.style.transform = 'translate(-50%, -50%)';
            cardElement.classList.remove('dragging');
            cardElement.classList.add('correct-match-card'); 
            const nameSpan = cardElement.querySelector('span:nth-child(2)');
            if (nameSpan) nameSpan.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥ —ç–º–æ–¥–∑–∏
            
            dropZoneEl.appendChild(cardElement);
            
            // –£–¥–∞–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –±–ª–æ–∫–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            choicesContainerEl.innerHTML = '';
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å–∏–ª—É—ç—Ç
            silhouetteIconEl.style.opacity = '0';
            
            // 2. –ê–°–ò–ù–•–†–û–ù–ù–´–ô –í–´–ó–û–í TTS
            loadingIndicatorEl.classList.remove('hidden');
            playAnimalNameTTS(currentQuestion.correct.name); // –±–æ–ª—å—à–µ –Ω–µ .finally() –∑–¥–µ—Å—å, —Ç.–∫. finally –≤–Ω—É—Ç—Ä–∏ TTS

            // 3. –ì–ê–†–ê–ù–¢–ò–Ø: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–î–∞–ª–µ–µ" —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                nextButtonEl.classList.remove('hidden');
            }, 1500); 

        } else {
            // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            resetCardPosition(cardElement);
        }
    }

    // –ü–æ–∫–∞–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    function showStatus(message, type, duration) {
        statusMessageEl.textContent = message;
        statusMessageEl.className = 'message-box';
        statusMessageEl.classList.add(type);
        statusMessageEl.classList.remove('hidden');

        // –û—á–∏—Å—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ—à–∏–±–∫–æ–π
        if (type !== 'error') {
            setTimeout(() => {
                statusMessageEl.classList.add('hidden');
            }, duration);
        } else {
            // –î–ª—è –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–≤–ª—è–µ–º –≤–∏–¥–∏–º—ã–º, –ø–æ–∫–∞ –Ω–µ –Ω–∞—á–Ω–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ä–∞—É–Ω–¥
            setTimeout(() => {
                statusMessageEl.classList.add('hidden');
            }, duration);
        }
    }

    function nextQuestion() {
        initializeQuestionUI();
    }

    // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.onload = initializeQuestionUI;
    
    // –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ (–¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã)
    function startConfetti() {
        const count = 30;
        for (let i = 0; i < count; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = `${Math.random() * 100}%`;
            confetti.style.top = '0';
            confetti.style.animationDelay = `${Math.random() * 0.5}s`;
            dropZoneEl.appendChild(confetti);
            
            // –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => confetti.remove(), 2000);
        }
    }

</script>
</body>
</html>

